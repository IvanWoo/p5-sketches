import { expect } from "chai";

import { tangents } from "./geom";

describe("tangents", () => {
    const tests = [
        {
            args: [200, 200, 50, 600, 600, 80],
            expected: {
                inner: [
                    [
                        173.715925978748, 242.53407402125202, 642.0545184340032,
                        531.9454815659967,
                    ],
                    [
                        242.53407402125202, 173.715925978748, 531.9454815659968,
                        642.0545184340032,
                    ],
                ],
                outer: [
                    [
                        233.4305856062465, 162.8194143937535, 653.4889369699944,
                        540.5110630300056,
                    ],
                    [
                        162.8194143937535, 233.4305856062465, 540.5110630300056,
                        653.4889369699944,
                    ],
                ],
            },
        },
        {
            args: [600, 600, 80, 200, 200, 50],
            expected: {
                inner: [
                    [
                        642.0545184340032, 531.9454815659968, 173.715925978748,
                        242.53407402125202,
                    ],
                    [
                        531.9454815659967, 642.0545184340032,
                        242.53407402125202, 173.715925978748,
                    ],
                ],
                outer: [
                    [
                        540.5110630300056, 653.4889369699944, 162.8194143937535,
                        233.4305856062465,
                    ],
                    [
                        653.4889369699944, 540.5110630300056, 233.4305856062465,
                        162.8194143937535,
                    ],
                ],
            },
        },
        {
            args: [100, 400, 30, 500, 400, 50],
            expected: {
                inner: [
                    [106, 429.3938769133981, 490, 351.01020514433645],
                    [106, 370.6061230866019, 490, 448.98979485566355],
                ],
                outer: [
                    [98.5, 370.03752346684274, 497.5, 350.06253911140453],
                    [98.5, 429.96247653315726, 497.5, 449.93746088859547],
                ],
            },
        },
        {
            args: [500, 400, 50, 100, 400, 30],
            expected: {
                inner: [
                    [
                        490, 351.01020514433645, 106.00000000000001,
                        429.3938769133981,
                    ],
                    [490, 448.98979485566355, 106, 370.6061230866019],
                ],
                outer: [
                    [497.5, 449.93746088859547, 98.5, 429.96247653315726],
                    [
                        497.5, 350.06253911140453, 98.50000000000001,
                        370.03752346684274,
                    ],
                ],
            },
        },
    ];

    tests.forEach(({ args, expected }) => {
        it("basics", () => {
            const [x1, y1, r1, x2, y2, r2] = args;
            expect(tangents(x1, y1, r1, x2, y2, r2)).to.eql(expected);
        });
    });
});
